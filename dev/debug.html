<!DOCTYPE html>
<!--
    Copyright (C) 2014 Härnösands kommun

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as
    published by the Free Software Foundation, either version 3 of the
    License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

<html lang="en">
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>Open eMap - debug</title>
	<meta name="description" content="">
	<meta name="author" content="Anders Erlandsson, Sundsvalls kommun" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- This will make the page reload automatically when source has changed and page is served using grunt devserver -->
    <script src="//localhost:35729/livereload.js"></script>

    <script type="text/javascript">    var debug='source';    var devPath = '../';
    </script> 
    <script type="text/javascript" src="../src/main/javascript/OpenEMap.js"></script>
    
    <script type="text/javascript">
		function callback(client) {			var wait = function(callbackWait) {				if (typeof client.drawLayer === "undefined") {					 setTimeout(function() {wait(callbackWait)}, 5);				} else { 					client.toggleEdgeLabels();				}			}			wait(wait);		}				function init(name) {
			var options = {				gui : {					map : false,					toolbar : {},					zoomTools : {},					layers : {type: 'basic', legendDelay: 0},					baseLayers : {},					searchFastighet : {},	    			searchCoordinate: {renderTo: 'searchcoordinate'},					scalebar : {},	    			showCoordinate: {renderTo: 'showcoordinate'}				},				OpenEMap : {					basePathImages : '../resources/images/',					// Base path to be used for mapfish print servlet requests					basePathMapFish : '/mapfishprint-2.1.1/pdf',					// Base path to be used for all AJAX requests against search-lm REST API					basePathLM : '/search/lm/',					// name of user to be used when calling search-lm REST API					lmUser : 'sundsvall',					// Base path to be used for all AJAX requests against Elasticsearch REST API					basePathES : '/search/es/',					// URL/paths related to WMS usage / advanced layer list					wmsURLs : {						// URL to be used to fetch WMS capabilities etc. for add layer						basePath : '/geoserver/wms',						// URL to be used when WMS layer has been added to config						url : 'https://extmaptest.sundsvall.se/geoserver/wms',						// URL to getcapabilities document. Must include request parameter (eg. https://extmap.sundsvall.se/geoserver/wms?request=GetCapabilities&version=1.1.1)						getCapabilities : 'https://extmaptest.sundsvall.se/getcapabilities/wms.xml'					},					//Base path to proxy to be used for WFS-post					basePathProxy : '/cgi-bin/proxy.py?url=',					// WS paths to be used for AJAX requests					wsUrls : {						//basepath to Open eMap Admin						basePath : '/openemapadmin',						// relative path to configs, set in admin of modules in OpenHierarchy						configs : '/configs',						// relative path to adminconfigs, set in admin of modules in OpenHierarchy						adminconfigs : '/adminconfigs',						// path to permalinks						permalinks : '/openemappermalink/permalinks',						metadata : 'geometadata/getmetadatabyid',						metadata_abstract : 'geometadata/getabstractbyid'					}				}			};						try {				initOpenEMap(name, options, callback);			} catch(msg) {				alert(msg);			}		}
		init('config/nywebbkarta.json');
    </script>
    
</head>
<body>

<div id="configcombo" style="position: absolute; bottom: 50; left: 0"></div>
<!--<div id="map" style="position: absolute; left: 0; right: 0; width: 100%; height: 100%;"></div>
<div id="layers" style="position: fixed; right: 10px; top: 10px;"></div>
<div id="search" style="position: fixed; right: 10px; top: 670px; width: 300px; height: 100px;"></div>
-->
<div id="showcoordinate" style="position: absolute; bottom: 0px; left: 10px;" ></div>
<div id="searchcoordinate" style="position: absolute; left: 150px; bottom: 0px;" ></div>

</body>
</html>
